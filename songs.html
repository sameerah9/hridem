<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html,body{
 margin:0;
 height:100%;
 width:100%;
 background:black;
 font-family:cursive;
 overflow:hidden;
 color:white;
}

/* slides */
.slide{
 position:fixed;
 inset:0;
 display:flex;
 justify-content:center;
 align-items:center;
 text-align:center;
 opacity:0;
 transition:opacity 1s ease;
 overflow:hidden;
}
.active{opacity:1}

/* full screen bg for image/video */
.bg{
 position:absolute;
 top:50%;
 left:50%;
 transform:translate(-50%,-50%);
 width:100vw;
 height:100vh;
 object-fit:cover;
 z-index:-2;
}

/* blur only for images */
img.bg{
 filter:blur(40px) brightness(.5);
}

/* darker overlay */
.overlay{
 position:absolute;
 inset:0;
 background:radial-gradient(circle,transparent 20%,rgba(0,0,0,.85));
 z-index:-1;
}

/* centered card */
.card{
 display:flex;
 flex-direction:column;
 align-items:center;
 gap:20px;
 width:min(90vw,380px);
 padding:35px;
 border-radius:24px;
 background:rgba(0,0,0,.35);
 backdrop-filter:blur(10px);
 box-shadow:0 30px 90px rgba(0,0,0,.8);
}

/* album art */
.art{
 width:260px;
 height:260px;
 object-fit:cover;
 border-radius:18px;
 box-shadow:0 30px 80px rgba(0,0,0,.9);
}

/* text */
.text{
 font-size:30px;
 line-height:1.5;
 text-shadow:0 6px 25px rgba(0,0,0,.9);
}

.next{
 position:absolute;
 bottom:25px;
 font-size:14px;
 opacity:.6;
}
</style>
</head>

<body>

<div id="slides"></div>
<audio id="player"></audio>

<script>

/* Slides */
const slidesData=[
{video:"val.mp4",song:null,text:"Tap to begin our little story…"},
{img:"jotummereho.jpeg",song:"jotummereho.mp3",text:"This one reminds me of the first time I realised I liked you."},
{img:"samjhawan.jpeg",song:"samjhawaan.mp3",text:"This song feels like the days I waited for your calls and texts."},
{img:"khat.jpeg",song:"khat.mp3",text:"This one plays in my head whenever I miss you."},
{img:"maitera.jpeg",song:"maitera.mp3",text:"This one feels like our memories stitched together."},
{img:"mastmagan.jpeg",song:"mastmagan.mp3",text:"And this one… just feels like us."}
];

const container=document.getElementById("slides");
const player=document.getElementById("player");

/* build slides */
slidesData.forEach((s,i)=>{
 const div=document.createElement("div");
 div.className="slide";

 div.innerHTML=`

   ${s.video ? `
      <video class="bg" autoplay muted loop playsinline>
        <source src="${s.video}" type="video/mp4">
      </video>
   ` : `
      <img src="${s.img}" class="bg">
   `}

   <div class="overlay"></div>

   <div class="card">
      ${s.img ? `<img src="${s.img}" class="art">` : ``}
      <div class="text" id="text${i}"></div>
   </div>

   <div class="next">Tap anywhere →</div>
 `;
 container.appendChild(div);
});

const slides=document.querySelectorAll(".slide");
let index=0;
let unlocked=false;

/* typing effect */
function typeText(text,id){
 let i=0;
 const el=document.getElementById(id);
 el.innerHTML="";
 function type(){
   if(i<text.length){
     el.innerHTML+=text.charAt(i);
     i++;
     setTimeout(type,35);
   }
 }
 type();
}

/* show slide */
function showSlide(i){
 slides.forEach(s=>s.classList.remove("active"));
 slides[i].classList.add("active");

 typeText(slidesData[i].text,"text"+i);

 /* play music only if slide has song */
 if(slidesData[i].song){
   player.pause();
   player.src=slidesData[i].song;
   player.currentTime=0;
   player.play().catch(()=>{});
 }
}

/* show intro video immediately */
showSlide(0);

/* click navigation */
document.body.addEventListener("click",()=>{

 /* first tap unlocks audio & goes to first song */
 if(!unlocked){
   unlocked=true;
   index=1;
   showSlide(index);
   return;
 }

 /* next slides */
 index++;
 if(index<slides.length){
   showSlide(index);
 }else{
   window.location="letter.html";
 }

});

</script>

</body>
</html>
